2号
一检查全局歌单问题
二无焦点召回
三相似歌单：为所有公开歌单生成相似歌单。
四相似歌单排序，随机森林specilid int型修改。
一相似歌单：文本相似度计算specialid在计算时是转int型。点击排序阶段：随机森林排序specialid都是转成int型
    猜歌单：不需要修改。
    在选择训练样本时也是采用specialname作为唯一标识，通过specialname再转specialid，可能会存在同相似歌单同样的问题
二采用相似歌曲数据


3号
一为所有公开歌单生成相似歌单。
二为搜索团提供相似歌曲数据   完成
三相似歌单排序，随机森林specilid int型修改。
四 相似歌单 清除以前缓存

4号
一为所有公开歌单生成相似歌单，跑数太慢，优化。完成
二相似歌单排序，随机森林specilid int型修改。
三相似歌单找服务端 清除以前缓存 5号完成
四猜歌单扩大召回

5号
一检查相似歌单数据，全量上线
二长音频
三绩效
四猜歌单作业内存使用


8号
一检查相似歌单数据，全量上线。已上线
二长音频  基本完成，再需检查数据
三绩效  完成
四猜歌单推荐源，灰度一个尾号。

9号
一长音频分类推荐改进  1
二相似歌单问题解决方案
三猜歌单特征灰度

10号
一相似歌单随机森林代码问题修改
二猜歌单特征灰度

11号
一随机森立代码问题继续解决  代码无问题，训练集太少。
二长音频乐库扩大推荐到20首
三歌单灰度

12号
一随机森林代码问题继续解决  代码无问题，训练集太少。
二长音频完成
三猜歌单推荐理由分析
四歌单灰度

15号
一停掉相似歌单点击预估，改用随机排序
二歌单灰度

16号
一歌单灰度
二歌单推荐歌单。

25号
一猜歌单两个召回池灰度
二统计用户推荐源的songid有多少找不到歌单。

29号
一相似歌曲灰度。  1
二根据行为相似歌曲召回歌曲歌单。 1

30号
一相似歌曲过滤3.0灰度

31号
有声电台灰度结果分析。灰度4、8尾号，bi灰度4、9尾号。
相似歌曲-爬取歌单并没有在灰度

8月
5号
统计相似歌曲相关数据1600首歌曲找不到相似歌曲。小于10首相似歌曲的歌曲多了5000首,过滤的scid少了7136首。
，相似歌曲灰度更新。
全局歌单id修改
推荐、分发歌单，用户自建歌单

6号
确认相似歌单是否需要修改。

7号
1.歌单统计特征，播放转换率，点击转换率。切歌率。播放转换率可以判断歌单质量。
2.有声电台灰度结果
3.相似歌单需要计算5亿歌单
4.有声电台过滤悬疑小说。

8号
有声电台过滤悬疑，不能推

19号
歌单分发池
搜索入口歌单与推荐入口
歌单年代、标签、语种,(标题中获取标签如dj、抖音)
猜你喜欢灰度热度

20
歌单用户留存率怎么样，如果用户留存高，可以针对歌单用户通过分类用户进行分发。
继续歌单标签的提取 完成。

21号
1.分发
2.歌单用户推荐记录。77%的用户是在过去一个月来过歌单推荐模块的用户。
根据歌单的标签语种，分析不同风格、语种的歌单播放切歌情况，小语种、俄语的歌单切歌率是非常高的。国语和粤语的推荐效果更好
风格标签类网络标签的歌单播放量、以及人均播放量都是非常高的。
3.歌单歌曲根据热度定义评分，跑了几个结果，选择比较好的结果。
4.歌单标签做成特征，计算模型。

23号
歌单推荐加上统计特征后效果变差，可能是大部分的歌单是没有统计特征的。
推荐歌单的灰度。
歌单标签灰度
相似歌曲7尾号灰度

26
歌单与歌单的相似度大于90%。
相似歌曲1推1，用songid过滤，但很多scid仍然是没有版权的。大概有1/3的scid是没有版权的。
把歌单风格标签付给歌曲作为歌曲风格标签。

27
歌单风格标签付给歌曲作为歌曲风格标签完成（情感标签赋值给歌曲，会出现很多矛盾的地方），歌单标签灰度在歌单上已经用了。
过滤内容基本一致的歌单（内容基本一致过滤有点难）、歌单名过滤。

28
1想一下歌单召回中怎么过滤内容基本一致的歌单，
2统计去年和今年每日推荐活跃用户的占比和数量。
3lihgtgbm算法尝试一下
4.统计不同歌曲数量的歌单的播放情况。歌曲数在100以上的歌单是4500,小于30的歌单是3万2千，在top100的播放量中只有17个歌单的数量是低于30的。大于100的歌单是19个。
大于100的播放占比是16% ，歌单数量占比是8%。而且大于100的歌单在单曲收藏量更多。(0,30)  23822811，82878；>100，12968810，13987

29-30
相似歌曲根据scid过滤灰度，播放提升了3%，人均播放和时长都有提高，其中有2万多的scid是有版权过滤，同时新增了5万多的scid。
歌曲特征
lightgbm算法
统计不同歌单数量的歌单播放收藏情况
在召回阶段做了相似歌单的去重，跟宇博讨论了一下是针对相似歌单

9月
2号
统计用户对不同标签的歌单的播放情况
长歌单的标签统计。
分析：基础数据变化，推荐源、样本、噪音数据过滤
select wm,count(*)
(
select i,sh,sn,wm
from ddl.dt_list_ard_d
where dt='2019-09-01'
and sty='音频'
and b='播放' and r='播放'
and substring(i,-1)='1'
)t1
group by wm
limit 20;


select t1.i,t1.spt1/t2.spt2
from
(
select i,sum(spt)/1000 spt1
from
ddl.dt_list_ard_d
where dt='2019-09-01'
and a = '12406' and fs = '1'
and substring(i,-1)='1' group by i
)t1 join
(
select i,sh,sn,wm,sum(spt)/1000 spt2
from ddl.dt_list_ard_d
where dt='2019-09-01'
and sty='音频' and fs in ('完整播放','被终止')
and b='播放' and r='播放' and action='play'
and substring(i,-1)='1'  and tv>=7900
)t2 on t1.i =t2.i


select wm,fs,sum(geci),sum(favor)
from
(
select t1.i,t1.sh,wm,fs,if(t2.i is null and t2.sh is null,0,1) geci,if(t3.user_id is null and t3.hash is null ,0,1) favor
from
(
select i,sh,sn,wm,fs
from ddl.dt_list_ard_d
where dt='2019-09-01'
and sty='音频' and action='play' and fs in ('完整播放','被终止')
and b='播放' and r='播放' and action='play'
and substring(i,-1)='1' and tv>=7900
)t1
left join
(
select i,sh from
ddl.dt_list_ard_d
where dt='2019-09-01'  and b='歌词曝光' and r='歌词曝光' and a='11375'
and substring(i,-1)='1' and tv>=7900
)t2 on (t1.i=t2.i and upper(trim(t1.sh)) = upper(trim(t2.sh)))
left join
(
select user_id,hash from ddl.dt_list_archive_collect_d
where dt='2019-09-01'  and data_type='1'
and substring(user_id,-1)='1' and tv>=7900
)t3 on (t1.i=t3.user_id and upper(trim(t1.sh)) = upper(trim(t3.hash)))
group by
t1.i,t1.sh,wm,fs,if(t2.i is null and t2.sh is null,0,1),if(t3.user_id is null and t3.hash is null ,0,1)
)t21 group by wm,fs ;

select tag,count(*)
from
(
select i,case when timelength/playlength >0.8 then '>0.8'
when timelength/playlength <=0.8 and timelength/playlength>0.5 then '(0.5,0.8]'
when timelength/playlength <=0.2 and timelength/playlength>0.3 then '(0.3,0.5]'
else '<0.2' end as tag
from temp.ll_analyse_user_use_app_time_1
)t1 group by tag